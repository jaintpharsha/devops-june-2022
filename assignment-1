pipeline {
    agent none
    parameters {
        choice(name: 'BRANCH', choices: ['main','master'], description: 'Select branch to do build')     
               }
    stages {
        script {
           if (params.BRANCH == 'master')   
             stage('TEST1') {
             agent any
             steps {
                 echo "running this on master or built in node"
                  sh '''
                    #!/bin/bash 
                    pwd 
                    ls
                    echo "This is a testing-1 stage"
                    sleep 5
                '''  
            }
        }

        stage('TEST2') {
            agent any 
            steps {
               echo "running on master or built-in node"
               echo "This is a testing-2 stage"
                sh 'sleep 5'
            }
        }
    } 
    } else 
         {
           echo " can not run on any branch except master"
           }
        }
}
